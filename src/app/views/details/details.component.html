<div class="container mt-3">
  <div class="row">
    <div *ngIf="isLoading">
      <mat-spinner class="pt-3 pb-3 center"></mat-spinner>
    </div>
    <div *ngIf="!isLoading && pokemonData" class="row">
      <div class="col-md-8">
        <mat-card>
          <mat-card-content>
            <mat-tab-group>
              <mat-tab label="Status">
                <app-pokemon-status-table
                  [pokemonStats]="pokemonData.details.stats"
                >
                </app-pokemon-status-table>
              </mat-tab>
              <mat-tab label="Entwicklungen" *ngIf="evolutionChain.length > 1">
                <div
                  class="evolution-container align-items-center justify-content-center mt-2"
                  [ngStyle]="{
                    'grid-template-columns':
                      'repeat(' + maximalEvolutionStep + ', 1fr)'
                  }"
                >
                  <mat-card
                    class="pokemon-card"
                    *ngFor="let pokemon of evolutionChain"
                    [routerLink]="['/pokemon/', pokemon.name]"
                    [ngStyle]="{
                      'grid-column': pokemon.step + 1
                    }"
                  >
                    <mat-card-header>
                      <mat-card-subtitle>
                        {{
                          pokemon.name
                            | pokemonName : actualLanguageId
                            | titlecase
                        }}</mat-card-subtitle
                      >
                    </mat-card-header>
                    <mat-card-content class="text-center">
                      <div class="image-container center">
                        <img
                          *ngIf="(pokemon.url | pokemonImageByUrl).length"
                          [src]="pokemon.url | pokemonImageByUrl"
                          class="center text-center image-container"
                        />
                      </div>
                    </mat-card-content>
                  </mat-card>
                </div>
              </mat-tab>
            </mat-tab-group>
          </mat-card-content>
        </mat-card>
      </div>

      <div class="col-md-4">
        <mat-card>
          <mat-card-content>
            <mat-tab-group>
              <mat-tab label="Artwork">
                <div class="imgContainer">
                  <img
                    [src]="
                      pokemonData.details.sprites.other['official-artwork']
                        .front_default
                    "
                  />
                </div>
              </mat-tab>
              <mat-tab label="Sprites">
                <div class="imgContainer">
                  <div class="text-center">
                    <img [src]="pokemonData.details.sprites.back_default" />
                    <img [src]="pokemonData.details.sprites.front_default" />
                  </div>
                  <mat-divider></mat-divider>
                  <div class="text-center">
                    <img [src]="pokemonData.details.sprites.back_shiny" />
                    <img [src]="pokemonData.details.sprites.front_shiny" />
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </mat-card-content>
        </mat-card>
      </div>

      <div class="col-md-12 mt-3">
        <app-move-table
          [pokemonMoves]="pokemonData.details.moves"
        ></app-move-table>
      </div>
    </div>
  </div>
</div>
